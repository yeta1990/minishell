

stdin redirection in the parent process. the key is to restore the fd 0 original, in order not to get a weird behavior of readline.

int fds[2];
int fd;
int fd_original;

fd_original = dup(0); //storing original fd 0
fd = open(...)
dup2(fd, 0); //redirection of file into 0
close(fd);

pipe(fds);

execution (fork, etc.)
dup2(fd_original, 0); // original fd 0 restored

this isn't necessary if it's redirected in a child
